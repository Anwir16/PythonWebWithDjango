{% extends 'home/base.html' %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'home/css/dashboard.css' %}">
{% endblock css %}
{% block main-content %}
<div class="content">
    <div class="row content-main">
        <div class="title">
            <h4>Menu</h4>
        </div>
        <div class="form">
            <form action="{% url 'game:start' %}" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="bet_point">Bet Points</label>
                    <input type="number" name="choice_bet_point" id="choice_bet_point" value="25" class="form-control">
                    <p id="message" class="message">{{error}}</p>
                </div>
                <button type="submit" id="start" class="btn btn-success">Start</button>
                <a href="{% url 'wallet:buy_point' %}" id="top_up" class="btn btn-success">Top up here</a>
            </form>
        </div>
    </div>
</div>
{% endblock main-content %}
{% block js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        $('#top_up').hide()
        var bet_point = parseInt(document.getElementById('choice_bet_point').value, 0);
        var profilePoint = {{ profile.point }};
        var messageElement = document.getElementById('message');
        if (profilePoint < bet_point) {
            messageElement.textContent = 'Your points are insufficient. Please top up to continue the experience.';
            messageElement.style.color = 'black';
            $('#start').hide()
            $('#top_up').show()
        }
    });
</script>
{% endblock js %}
